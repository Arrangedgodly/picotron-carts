picotron cartridge // www.picotron.net
version 2

:: afx/
:: afx/.info.pod
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI0LTEyLTEyIDA2OjU4OjM5Iixtb2RpZmllZD0iMjAyNC0x
Mi0xMiAyMDoxMjoyNSJdXQ==
:: gfx/
:: gfx/0.gfx
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI0LTEyLTExIDIwOjU1OjM5Iixtb2RpZmllZD0iMjAyNC0x
Mi0xMiAyMDoxMjoyNSIscmV2aXNpb249NzM4XV1sejQAXQIAAM4yAADzIXtbMF09e2JtcD1weHUA
QyAQEATwVgcQB8AX0BfABxAH8FYsZmxhZ3M9MCxwYW5feAgAy3k9MCx6b29tPTh9LD4A-xkDBtAW
0AYQJpBWkBYQBqAGIAYwRkBmAAZgFkAWYAZAFsAWwBbQBvAmWAAd8AYXJwAXYIdQRyAXUBcwJ7AX
0DfgB8AIAH8nwCfgB-AVUAAd-woWXxaALrAe0A7gXqBOgC6QPrBu0D6gTuAuSwAf-yMUNbAFQCVg
FQA1AAWAFTAFcBUwFXAFAAUQFXAVADWABSAVgBUQZUAVEBUwBWBVwAXwF2IAHfEXBS8VoC7ADjBO
UA4gLgAeUC4wHlAeEC4QHkAuMA4AHkAOAA4wDgAGALAQTgAuMA4QPgAuUBwAvw5gLiAucF6QLvAI
dQAe8A9vD3Ae0B4QPoAOAB4QHnAOAA4gHoAuAC5QfgAOME5tAOAwDhAOIA4QHjAeAA4gDpkAAAYA
b3B_kF7wFG8AGfIOICAE8CQPEvAOHvANLvANDhAO0F5wDhAO8AQOUB4HAPAQDjAO8AKOIB7wAC4g
XhAO4C4gLjA_0B4gLjBOwC4ATpAAcJAuAC4ADlDxAPAATiAOMD4gPqAOMA4gTgBeCACQEC4AbgAO
sA4grABATiAesBwA-yZeIB7ADjA_EC4wDtBOAA4APjAu8AFOMD4ADvACDgC_8AIOMD4AHvAFTjBe
8AMOoB7wDw7wk0kBHR-wMQALHzkxAP----------------------------------------------
----------------YFBtPTl9fQ==
:: gfx/.info.pod
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI0LTEyLTExIDIxOjAzOjIwIixtb2RpZmllZD0iMjAyNC0x
Mi0xMiAyMDoxMjoyNSJdXQ==
:: map/
:: map/0.map
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI0LTEyLTExIDIwOjU1OjM5Iixtb2RpZmllZD0iMjAyNC0x
Mi0xMiAyMDoxMjoyNSIscmV2aXNpb249NzAwXV1sejQAaAAAAFgQAADwCHt7Ym1wPXVzZXJkYXRh
KCJpMTYiLDMyAwAvIjABAP--------------------vxCCIpLGhpZGRlbj1mYWxzZSxwYW5feD0w
CADSeT0wLHRpbGVfaD0xNgoAEHcKAIB6b29tPTF9fQ==
:: map/.info.pod
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI0LTEyLTExIDIxOjAzOjIwIixtb2RpZmllZD0iMjAyNC0x
Mi0xMiAyMDoxMjoyNSJdXQ==
:: sfx/
:: sfx/0.sfx
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI0LTEyLTExIDIwOjU1OjM5Iixtb2RpZmllZD0iMjAyNC0x
Mi0xMiAyMDoxMjoyNSIscmV2aXNpb249Njg5XV1sejQAoAAAAAsKAAD-MHB4dQADKAAABAAED0AQ
Ag4AAaABIAKgDgAPEAAN8MoBAgNADw_QBAUGB0AMkAgJCgtADJAPDA8NDw4MQAzw-wEA6-8nqgEQ
Bg8gEAEgASAB8AACEAIOEAEgDyEgATAPQPDDDygP--DGD-gKD-8PgA-3Dw0B8AkBEAYOMAD-----
-70f-wEArM-ID0AADxBA--_w8P8BAP-qUP----8p
:: sfx/.info.pod
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI0LTEyLTExIDIxOjAzOjIwIixtb2RpZmllZD0iMjAyNC0x
Mi0xMiAyMDoxMjoyNSJdXQ==
:: vgfx/
:: vgfx/0.vgfx
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI0LTEyLTExIDIwOjU3OjMwIixtb2RpZmllZD0iMjAyNC0x
Mi0xMSAyMTowMzoyMCIscmV2aXNpb249MzBdXWx6NACOAAAA0QAAALB7e3tjb2xfYT0xLAgA8Cti
PTE2LGZpbGw9NDM2OTAsbmFtZT0iIixvdXRsaW5lPS0xLHBvaW50cz17ezQwLC00MH0sey0xMCwx
CQDzDjAsNDB9fSxzaG93PXRydWUsdHlwZT0iZWFyIn0saAATOGgAEjJnAE8zNzc0ZwALFS1oAD8x
MyxmAApQciJ9fX0=
:: vgfx/.info.pod
b64$LS1bW3BvZCxjcmVhdGVkPSIyMDI0LTEyLTExIDIwOjU3OjMwIixtb2RpZmllZD0iMjAyNC0x
Mi0xMiAyMDoxMjoyNSJdXQ==
:: gui.lua
--[[pod_format="raw",created="2024-12-11 21:26:33",modified="2024-12-12 20:12:25",revision=806]]
gui = create_gui()

local colors = {
	menu_background = theme"icon0",
	button_unselect = theme"icon1",
	button_select = theme"icon0",
	button_text = theme"icon2",
	container_bg = 5,
}
	
local menuBar = gui:attach{
	x=400,
	y=0,
	width = 80,
	height = 270,
	draw = function(self)
		fillBG(self,colors.menu_background)
	end
}

text_bar = menuBar:attach_text_editor{
	x = 5,
	y = 2,
	width = 70,
	height = 15,
	block_scrolling = true
}

function fillBG(self, col)
	rectfill(0,0,self.width,self.height,col)
end

local loadBtn = menuBar:attach{
	x=0,
	y=text_bar.height + 4,
	width=80,
	height=15,
	clicked = false,
	hovered = 0,
	draw = function(self)
		fillBG(self, self.clicked and colors.button_select or colors.button_unselect)
		if self.hovered > 0 then
			print("Load", 32, 5, colors.container_bg)
		else
			print("Load", 32, 5, colors.button_text)
		end
	end,
	click = function(self)
		self.clicked = true
		popup_open = true
	end,
	release = function(self) self.clicked = false end,
	hover = function(self) self.hovered = 2 end,
	update = function(self)
		if self.hovered > 0 then
			self.hovered -= 1
		end
	end 
}

local saveBtn = menuBar:attach{
	x = 0,
	y = loadBtn.y + loadBtn.height,
	width = menuBar.width,
	height = 15,
	clicked = false,
	hovered = 0,
	draw = function(self)
		fillBG(self, self.clicked and colors.button_select or colors.button_unselect)
		if self.hovered > 0 then
			print("Save", 32, 5, colors.container_bg)
		else
			print("Save", 32, 5, colors.button_text)
		end
	end,
	click = function(self) self.clicked = true end,
	release = function(self) self.clicked = false end,
	hover = function(self) self.hovered = 2 end,
	update = function(self)
		if self.hovered > 0 then
			self.hovered -= 1
		end
	end
}	
:: main.lua
--[[pod_format="raw",author="Arranged Godly",created="2024-12-11 20:55:39",modified="2024-12-12 20:12:25",notes="A tool for creating afx\nanimation files from gfx files",revision=876,title="Animation Editor",version="0.1"]]
include "gui.lua"
include "popup.lua"

popup_open = false

function _init()
  get_display()
  window({
    width = 480,
    height = 270,
    title = "temp.afx",
    has_frame = false,
    show_toolbar = true,
    tabbed = true,
    icon = userdata("[gfx]08087770777077707770777077700700070077777707777777777777777777777707[/gfx]"),
    x = 0,
    y = 0
  })
  
  mkdir("/ram/cart/afx")
  
end

function _update()
	gui:update_all()
	
	if popup_open then popup_gui:update_all() end
	
	if key("escape") then
		stop()
	end
end

function _draw()
	cls(theme"window_frame")
	gui:draw_all()
	
	if popup_open then popup_gui:draw_all() end
  
end
:: popup.lua
--[[pod_format="raw",created="2024-12-12 17:19:03",modified="2024-12-12 20:12:25",revision=267]]
popup_gui = create_gui()

close_hover_sprite = userdata("[gfx]08085500005555500555055555500055550000555500055555505550055555000055[/gfx]")
close_sprite = userdata("[gfx]08082200002222200222022222200022220000222200022222202220022222000022[/gfx]")

settings = {
	height = 8,
	width = 8
}

frame = 1

local Window = popup_gui:attach{
	x = 50,
	y = 5,
	width = 300,
	height = 250,
	draw = function(self)
		fillBG(self,6)
	end
}

local closeButton = Window:attach{
	x = 290,
	y = 2,
	width = 8,
	height = 8,
	hovered = 0,
	draw = function(self)
		if self.hovered > 0 then
			spr(close_sprite)
		else
			spr(close_hover_sprite)
		end
	end,
	hover = function(self)
		self.hovered = 2
	end,
	click = function(self)
		popup_open = false
	end,
	update = function(self)
		if self.hovered > 0 then
			self.hovered -= 1
		end
	end
}

for h = 1, settings.height do
	for w = 1, settings.width do
		Window:attach{
			x = w * 16,
			y = h * 16,
			width = 16,
			height = 16,
			sprite_num = frame,
			draw = function(self)
				sspr(self.sprite_num, 0, 0, 8, 8, 0, 0, 16, 16)
			end
		}
		frame += 1
	end
end

function fillBG(self, col)
	rectfill(0,0,self.width,self.height,col)
end
:: .info.pod
b64$LS1bW3BvZCx2ZXJzaW9uPSIwLjEiLG1vZGlmaWVkPSIyMDI0LTEyLTEyIDIwOjEyOjI1Iixu
b3Rlcz0iQSB0b29sIGZvciBjb252ZXJ0aW5nIGdmeFxuZmlsZXMgaW50byBhZnggYW5pbWF0aW9u
cyIsaWNvbj11c2VyZGF0YSgidTgiLDE2LDE2LCIwMDAwMDAwMDAwMDAwZDBkMGQwZDBkMGQwZDAw
MDAwMDAwMGQwZDBkMGQwZDBkMDcwNzA3MDcwNzBkMDAwMDAwMDAwZDA3MDcwNzBkMGQwNzAxMDEw
MTA3MGQwMDAwMDAwMDBkMDcwMTA3MGQwZDA3MDEwMTAxMDcwZDAwMDAwMDAwMGQwNzA3MDcwZDBk
MDcwNzA3MDcwNzBkMDAwMDAwMGQwZDBkMDcwZDBkMGQwZDBkMDcwZDBkMGQwZDBkMGQwZDA3MDcw
NzA3MDcwNzA3MDcwNzA3MDcwZDBkMDcwZDBkMDcwNzA3MDcwNzA3MDcwNzA3MDcwNzBkMDcwNjBk
MGQwNzA3MDcwMTAxMDEwNzAxMDEwMTA3MDcwNjA2MGQwZDA3MDcwNzAxMDcwMTA3MDEwNzA3MDcw
NzA2MDYwZDBkMDcwNzA3MDEwMTAxMDcwMTAxMDcwNzA3MDYwNjBkMGQwNzA3MDcwMTA3MDEwNzAx
MDcwNzA3MDcwNjA2MGQwZDBkMDcwNzAxMDcwMTA3MDEwMTAxMDcwNzA2MDYwZDAwMGQwZDA3MDcw
NzA3MDcwNzA3MDcwNzBkMDcwNjBkMDAwMDBkMGQwNzA3MDcwNzA3MDcwNzA3MGQwZDA3MGQwMDAw
MDAwZDBkMGQwZDBkMGQwZDBkMGQwZDBkMGQwZCIpLGF1dGhvcj0iQXJyYW5nZWQgR29kbHkiLHRp
dGxlPSJBbmltYXRpb24gRWRpdG9yIixjcmVhdGVkPSIyMDI0LTEyLTExIDIwOjU2OjIzIixydW50
aW1lPTEyLHdvcmtzcGFjZXM9e3tsb2NhdGlvbj0ibWFpbi5sdWEjMjEiLHdvcmtzcGFjZV9pbmRl
eD0xfSx7bG9jYXRpb249Imd1aS5sdWEjNTAiLHdvcmtzcGFjZV9pbmRleD0xfSx7bG9jYXRpb249
InBvcHVwLmx1YSM0OCIsd29ya3NwYWNlX2luZGV4PTF9LHtsb2NhdGlvbj0iZ2Z4LzAuZ2Z4Iix3
b3Jrc3BhY2VfaW5kZXg9Mn0se2xvY2F0aW9uPSJtYXAvMC5tYXAiLHdvcmtzcGFjZV9pbmRleD0z
fSx7bG9jYXRpb249InNmeC8wLnNmeCIsd29ya3NwYWNlX2luZGV4PTR9fV1d
:: [eoc]
